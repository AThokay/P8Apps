P8.setLCDTimeout(30);var buf=Graphics.createArrayBuffer(160,160,1,{msb:!0});function flip(){g.setColor(1,1,1),g.drawImage({width:160,height:160,bpp:1,buffer:buf.buffer},40,40),buf.clear()}var genA=new Uint8Array(324),genB=new Uint8Array(324),generation=0,gentime=0,currentY=1;function initDraw(e){for(let a=1;a<17;++a)for(let i=1;i<17;++i){var t=Math.random()<.5?1:0;if(e[i+18*a]=t,1==t){var n=10*(i-1),r=10*(a-1);buf.fillRect(n,r,n+7,r+7)}}flip()}function howlong(){++generation,g.setFont("6x8",2),g.setFontAlign(-1,-1,0),gentime=Math.floor(gentime),g.drawString("Gen:"+generation+"  "+gentime+"ms  ",20,220,!0),gentime=0}function next(){var e=Date.now(),t=genA,n=genB,r=currentY,a=e=>t[e-19]+t[e-18]+t[e-17]+t[e-1]+t[e+1]+t[e+17]+t[e+18]+t[e+19];for(let e=1;e<17;++e){var i=e+18*r,o=a(i),f=1==t[i]&&2==o||3==o?1:0;if(n[i]=f,1==f){var g=10*(e-1),l=10*(r-1);buf.fillRect(g,l,g+7,l+7)}}if(gentime+=Date.now()-e,16==r){flip();var u=genA;genA=genB,genB=u,howlong(),currentY=1}else++currentY}var intervalRef=null;function stopdraw(){intervalRef&&clearInterval(intervalRef)}function startdraw(e){void 0===e&&(e=!1),e||g.clear(),e||(intervalRef=setInterval(next,65))}function regen(){stopdraw(),g.setColor(1,1,1),initDraw(genA),currentY=1,generation=0,gentime=0,intervalRef=setInterval(next,65)}function setButtons(){TC.on("touch",regen)}P8.on("sleep",e=>{e?stopdraw():startdraw()}),TC.on("swipe",e=>{e==TC.DOWN&&load("launch.js")}),setTimeout(()=>{g.clear(),startdraw(!0),setButtons(),buf.setFont("Vector",40),buf.setFontAlign(0,0),buf.drawString("LIFE",80,80),buf.setFont("6x8",2),buf.drawString("Conway's",80,20),buf.drawString("(Touch Start)",80,140),flip()},500);